FROM node:20-alpine

WORKDIR /app

COPY package.json .

RUN npm install

# ARG VITE_KEYCLOAK_URL
# ARG VITE_KEYCLOAK_REALM
# ARG VITE_KEYCLOAK_CLIENT
# ARG VITE_REDIRECT_URL

# ENV VITE_KEYCLOAK_URL=$VITE_KEYCLOAK_URL
# ENV VITE_KEYCLOAK_REALM=$VITE_KEYCLOAK_REALM
# ENV VITE_KEYCLOAK_CLIENT=$VITE_KEYCLOAK_CLIENT
# ENV VITE_REDIRECT_URL=$VITE_REDIRECT_URL

COPY . .

RUN npm run build

EXPOSE 8080

CMD [ "npm", "run", "preview" ]